<!DOCTYPE html>
<html>

<head>
  <title>index</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet" />
  <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet" />
  <link href="data/styles.css" type="text/css" rel="stylesheet" />
  <link href="files/index/styles.css" type="text/css" rel="stylesheet" />
  <script src="resources/scripts/jquery-1.7.1.min.js"></script>
  <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
  <script src="resources/scripts/prototypePre.js"></script>
  <script src="data/document.js"></script>
  <script src="resources/scripts/prototypePost.js"></script>
  <script src="files/index/data.js"></script>
  <script type="text/javascript">
    $axure.utils.getTransparentGifPath = function () { return 'resources/images/transparent.gif'; };
    $axure.utils.getOtherPath = function () { return 'resources/Other.html'; };
    $axure.utils.getReloadPath = function () { return 'resources/reload.html'; };
  </script>

  <style>
    #myImg {
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    #myImg:hover {
      opacity: 0.7;
    }

    /* The Modal (background) */

    .modal {
      display: none;
      /* Hidden by default */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Sit on top */
      padding-top: 100px;
      /* Location of the box */
      left: 0;
      top: 0;
      width: 100%;
      /* Full width */
      height: 100%;
      /* Full height */
      overflow: auto;
      /* Enable scroll if needed */
      background-color: rgb(0, 0, 0);
      /* Fallback color */
      background-color: rgba(0, 0, 0, 0.9);
      /* Black w/ opacity */
    }

    /* Modal Content (image) */

    .modal-content {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
    }

    /* Caption of Modal Image */

    #caption {
      margin: auto;
      display: block;
      width: 80%;
      max-width: 700px;
      text-align: center;
      color: #ccc;
      padding: 10px 0;
      height: 150px;
    }

    /* Add Animation */

    .modal-content,
    #caption {
      -webkit-animation-name: zoom;
      -webkit-animation-duration: 0.6s;
      animation-name: zoom;
      animation-duration: 0.6s;
    }

    @-webkit-keyframes zoom {
      from {
        -webkit-transform: scale(0)
      }
      to {
        -webkit-transform: scale(1)
      }
    }

    @keyframes zoom {
      from {
        transform: scale(0)
      }
      to {
        transform: scale(1)
      }
    }

    /* The Close Button */

    .close {
      position: absolute;
      top: 15px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      transition: 0.3s;
    }

    .close:hover,
    .close:focus {
      color: #bbb;
      text-decoration: none;
      cursor: pointer;
    }

    /* 100% Image Width on Smaller Screens */

    @media only screen and (max-width: 700px) {
      .modal-content {
        width: 100%;
      }
    }
  </style>
</head>

<body>


  <div id="base" class="">

    <!-- sampe_base (動態面板) -->
    <div id="u0" class="ax_default" data-label="sampe_base">
      <div id="u0_state0" class="panel_state" data-label="State1">
        <div id="u0_state0_content" class="panel_state_content">

          <!-- Unnamed (Image) -->
          <div id="u1" class="ax_default image">
            <img id="u1_img" class="img " src="images/index/u1.jpg" />
            <!-- Unnamed () -->
            <div id="u2" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Preloader (動態面板) -->
    <div id="u3" class="ax_default" data-label="Preloader">
      <div id="u3_state0" class="panel_state" data-label="0">
        <div id="u3_state0_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u4" class="ax_default image" data-label="Preloader">
            <img id="u4_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u5" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state1" class="panel_state" data-label="30" style="visibility: hidden;">
        <div id="u3_state1_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u6" class="ax_default image" data-label="Preloader">
            <img id="u6_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u7" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state2" class="panel_state" data-label="60" style="visibility: hidden;">
        <div id="u3_state2_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u8" class="ax_default image" data-label="Preloader">
            <img id="u8_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u9" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state3" class="panel_state" data-label="90" style="visibility: hidden;">
        <div id="u3_state3_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u10" class="ax_default image" data-label="Preloader">
            <img id="u10_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u11" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state4" class="panel_state" data-label="120" style="visibility: hidden;">
        <div id="u3_state4_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u12" class="ax_default image" data-label="Preloader">
            <img id="u12_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u13" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state5" class="panel_state" data-label="150" style="visibility: hidden;">
        <div id="u3_state5_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u14" class="ax_default image" data-label="Preloader">
            <img id="u14_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u15" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state6" class="panel_state" data-label="180" style="visibility: hidden;">
        <div id="u3_state6_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u16" class="ax_default image" data-label="Preloader">
            <img id="u16_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u17" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state7" class="panel_state" data-label="210" style="visibility: hidden;">
        <div id="u3_state7_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u18" class="ax_default image" data-label="Preloader">
            <img id="u18_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u19" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state8" class="panel_state" data-label="240" style="visibility: hidden;">
        <div id="u3_state8_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u20" class="ax_default image" data-label="Preloader">
            <img id="u20_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u21" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state9" class="panel_state" data-label="270" style="visibility: hidden;">
        <div id="u3_state9_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u22" class="ax_default image" data-label="Preloader">
            <img id="u22_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u23" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state10" class="panel_state" data-label="300" style="visibility: hidden;">
        <div id="u3_state10_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u24" class="ax_default image" data-label="Preloader">
            <img id="u24_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u25" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="u3_state11" class="panel_state" data-label="330" style="visibility: hidden;">
        <div id="u3_state11_content" class="panel_state_content">

          <!-- Preloader (Image) -->
          <div id="u26" class="ax_default image" data-label="Preloader">
            <img id="u26_img" class="img " src="images/index/preloader_u4.png" />
            <!-- Unnamed () -->
            <div id="u27" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- base_00 (動態面板) -->
    <div id="u28" class="ax_default" data-label="base_00">
      <div id="u28_state0" class="panel_state" data-label="State1">
        <div id="u28_state0_content" class="panel_state_content">

          <!-- base_png (Image) -->
          <div id="u29" class="ax_default image" data-label="base_png">
            <img id="u29_img" class="img " src="images/index/base_png_u29.png" />
            <!-- Unnamed () -->
            <div id="u30" class="text" style="display:none; visibility: hidden">
              <p>
                <span></span>
              </p>
            </div>
          </div>

          <!-- base_immediate data (動態面板) -->

          <div id="u31" class="ax_default" data-label="base_immediate data" style="margin:150px 0px 0px 0px">
            <div id="u31_state0" class="panel_state" data-label="State1">
              <div id="u31_state0_content" class="panel_state_content">

                <!-- base_immediate data (矩形) -->
                <div id="u32" class="ax_default box_3" data-label="base_immediate data">
                  <div id="u32_div" class="">
                    <div class="js-gauge js-gauge--1 gauge"></div>
                    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.js"></script>
                    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.2/raphael-min.js"></script>
                    <script type="text/javascript" src="js/kuma-gauge.jquery.js"></script>
                    <img id="myImg">

                    <!-- The Modal -->
                    <div id="myModal" class="modal">
                      <span class="close">&times;</span>
                      <img class="modal-content" id="img01" align=right>
                      <div id="caption"></div>
                    </div>
                    <script>

                      function readTextFile(file) {
                        var rawFile = new XMLHttpRequest();
                        var allText;
                        rawFile.open("GET", file, false);
                        rawFile.onreadystatechange = function () {
                          if (rawFile.readyState === 4) {
                            if (rawFile.status === 200 || rawFile.status == 0) {
                              allText = rawFile.responseText;

                            }
                          }
                        }
                        rawFile.send(null);
                        // document.write(allText);
                        return allText

                      }

                      var test = readTextFile("faceData.txt");
                      // document.write(test);

                      var res = test.split(" ");
                      var res = res[0].split("\n");
                      var face = res[0].split(':')[1];
                      var happySum = res[1].split(':')[1];
                      var totalHappy = res[3].split(':')[1];

                      $('.js-gauge--1').kumaGauge({
                        // value: Math.floor((Math.random() * 99) + 1)
                        // value: Math.round((happySum / face) * 100)
                      });
                      var max = 3;
                      var counter
                      var flag = 0;
                      var initTime = new Date();


                      var update = setInterval(function () {
                        var test = readTextFile("faceData.txt");
                        var res = test.split(" ");
                        var res = res[0].split("\n");
                        var face = res[0].split(':')[1];
                        var happySum = res[1].split(':')[1];
                        var totalHappy = res[3].split(':')[1];
                        var happyRate;
                        happyRate = Math.round((happySum / face) * 100)
                        // happyRate = Math.floor((Math.random() * 99) + 1);

                        $('.js-gauge--1').kumaGauge('update', {
                          // value: Math.round((happySum / face) * 100)
                          value: happyRate
                        });

                        var currentTime = new Date();
                        var diffSec = (currentTime - initTime) / 1000;


                        if (happyRate >= 80 && flag < max && diffSec >= 10) {
                          flag = flag + 1;
                          modal.style.display = "block";
                          modalImg.src = "yeah.gif";
                        }
                        numAnim.update(totalHappy);

                      }, 1000);
                      var str = "開心率"
                      document.write(str.fontsize(5).fontcolor("#fff"));

                      var str2 = "累計開心能量"
                      document.write("<br>");
                      document.write("<br>");
                      document.write(str2.fontsize(6).fontcolor("#fff"));
                      document.write("<br>");
                      document.write("<br>");
                    </script>
                    <div id="value" style="font-size:30px; color:red;">0</div>

                    <script type="text/javascript" src="js/countUp.js"></script>
                    <script>
                      var numAnim = new CountUp("value", 0, 0, 0, 0.5);
                      if (!numAnim.error) {
                        numAnim.start();
                      } else {
                        console.error(numAnim.error);
                      }

                      // Get the modal
                      var modal = document.getElementById('myModal');

                      // Get the image and insert it inside the modal - use its "alt" text as a caption
                      var img = document.getElementById('myImg');
                      var modalImg = document.getElementById("img01");
                      var captionText = document.getElementById("caption");
                      var span = document.getElementsByClassName("close")[0];

                      // When the user clicks on <span> (x), close the modal
                      span.onclick = function () {
                        modal.style.display = "none";
                      }
                    </script>


                  </div>
                  <!-- Unnamed () -->
                  <div id="u33" class="text" style="display:none; visibility: hidden">
                    <p>
                    </p>
                  </div>
                </div>

                <!-- title_即時數據 (矩形) -->
                <div id="u34" class="ax_default _一級標題" data-label="title_即時數據">
                  <div id="u34_div" class=""></div>
                  <!-- Unnamed () -->
                  <div id="u35" class="text">
                    <p>
                      <span>即時數據</span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>